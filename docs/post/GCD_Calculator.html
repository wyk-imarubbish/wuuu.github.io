<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCD Calculator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
</head>

<body class="bg-gray-100 p-8">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-2xl font-bold mb-4">GCD Calculator</h1>
        <div class="mb-4">
            <label for="num1" class="block mb-2">First Number:</label>
            <input type="number" id="num1" class="w-full p-2 border rounded">
        </div>
        <div class="mb-4">
            <label for="num2" class="block mb-2">Second Number:</label>
            <input type="number" id="num2" class="w-full p-2 border rounded">
        </div>
        <button id="calculate" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Calculate GCD</button>
        <div id="result" class="mt-4"></div>
    </div>

    <script>
        function formatOutput(num) {
            return num < 0 ? `- ${Math.abs(num)}` : `+ ${num}`;
        }

        function gcd(a, b) {
            let original_a = a, original_b = b;
            if (a < b) [a, b] = [b, a];
            let r = [a, b];
            let q = [0];

            while (r[r.length - 1] !== 0) {
                q.push(Math.floor(r[r.length - 2] / r[r.length - 1]));
                r.push(r[r.length - 2] % r[r.length - 1]);
            }
            r.pop();

            let n = r.length - 1;
            let result = `gcd(${original_a}, ${original_b}) = ${r[n]}<br>`;

            if (n === 1) {
                result += `${r[n]} = ${b} + 0 * ${a}<br>`;
                return result;
            }

            result += `${r[n]} = ${r[n - 2]} ${formatOutput(-q[n - 1])} * ${r[n - 1]}<br>`;

            let k1 = 1, k2 = -q[n - 1];
            for (let j = n; j > 2; j--) {
                result += `= ${k1} * ${r[j - 2]} ${formatOutput(k2)} * (${r[j - 3]} ${formatOutput(-q[j - 2])} * ${r[j - 2]}) = `;
                k1 -= q[j - 2] * k2;
                [k1, k2] = [k2, k1];
                result += `${k1} * ${r[j - 3]} ${formatOutput(k2)} * ${r[j - 2]}<br>`;
            }

            return result;
        }

        document.getElementById('calculate').addEventListener('click', function () {
            const a = parseInt(document.getElementById('num1').value);
            const b = parseInt(document.getElementById('num2').value);
            if (isNaN(a) || isNaN(b)) {
                document.getElementById('result').innerHTML = 'Please enter valid numbers.';
                return;
            }
            const result = gcd(Math.abs(a), Math.abs(b));
            document.getElementById('result').innerHTML = result;
        });
    </script>
</body>

</html>
